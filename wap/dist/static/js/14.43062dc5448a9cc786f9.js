webpackJsonp([14],{"0xsV":function(t,e){},"4X0z":function(t,e,s){var i=s("VU/8")(s("U1OY"),s("vz2D"),function(t){s("tvsf")},null,null);t.exports=i.exports},DcsX:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("qqiS"),n=s.n(i),o=s("Au9i"),a=(s.n(o),s("4X0z")),l=s.n(a),r=s("RZmG"),c=s.n(r);e.default={name:"DeviceGroupManage",components:{BottomOperation:c.a,DeviceGroupList:l.a,MessageBox:o.MessageBox,Loading:n.a},data:function(){return{isLoading:!1,message:"新增设备组",selected:"shebei",list:[],page:1,size:10,total:null}},created:function(){this.getDeviceListData()},methods:{getDeviceListData:function(t){var e=this;this.isLoading=!0,this.$esellApi.send("/api/group/list.shtml",{page:this.page,size:this.size}).then(function(s){e.isLoading=!1,e.total=s.payload.total,e.page&&1==e.page?e.list=s.payload.data:e.list=t?e.this.list:e.list.concat(s.payload.data)}).catch(function(t){e.isLoading=!1,Object(o.Toast)({message:t.message,position:"middel",duration:2e3})})},addDevice:function(){this.$router.push({path:"/add_dev"})},deviceGroupManage:function(){this.$router.push({path:"/dev_group"})},clickItem:function(t){this.$router.push({path:"/examine_dev_group",query:{id:t.id,type:"2",name:t.name}})},addDeviceGroup:function(){this.$router.push({path:"/add_dev_group"})},remove:function(t){var e=this;"Y"!=t["default-value"]?o.MessageBox.confirm("确定执行此操作?").then(function(s){e.$esellApi.send("/api/group/delete.shtml",{id:t.id}).then(function(s){e.list.forEach(function(e,s){e.id==t.id&&this.list.splice(s,1)},e),Object(o.Toast)({message:"删除成功",position:"middel",duration:2e3})}).catch(function(t){Object(o.Toast)({message:t.message,position:"middel",duration:2e3})})}).catch(function(){Object(o.Toast)({message:res.message,position:"middel",duration:2e3})}):Object(o.Toast)({message:"默认数据，无法删除",duration:1e3})},scrollToEnd:function(){this.canAjax=!0},moveIng:function(t,e,s){Math.abs(e)-Math.abs(s)>20?this.canAjax&&(this.canAjax=!1,this.total>this.page*this.size?(this.page++,this.getDeviceListData()):(this.page=this.page,Object(o.Toast)({message:"已经是最后一页的数据了",position:"middle",duration:3e3}))):t.y>50&&this.canAjax&&(this.canAjax=!1,this.page=1,this.getDeviceListData(!0))}}}},U1OY:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("GQaK"),n=s("Au9i");s.n(n);e.default={components:{Toast:n.Toast},name:"deviceGroupList",props:{list:"",probeType:{type:Number,default:1},click:{type:Boolean,default:!0},data:{type:Array,default:null},listenScroll:{type:Boolean,default:!0},pullup:{type:Boolean,default:!0},beforeScroll:{type:Boolean,default:!0},refreshDelay:{type:Number,default:20}},data:function(){return{startX:0,startY:0,disX:0,disY:0,deleteSlider:"",canMove:!0,checked:0}},mounted:function(){var t=this;setTimeout(function(){t._initScroll()},5)},methods:{_initScroll:function(){var t=this;if(this.$refs.scroll_wrapper){if(this.scroll=new i.a(this.$refs.scroll_wrapper,{probeType:this.probeType,click:this.click}),this.listenScroll){var e=this;this.scroll.on("scroll",function(s){e.$emit("scroll",s,t.scroll.y,t.scroll.maxScrollY)})}this.pullup&&this.scroll.on("scrollEnd",function(){t.$emit("scrollToEnd",t.scroll.y,t.scroll.maxScrollY)}),this.beforeScroll&&this.scroll.on("beforeScrollStart",function(){t.$emit("beforeScroll")})}},enable:function(){this.scroll&&this.scroll.enable()},disable:function(){this.scroll&&this.scroll.disable()},refresh:function(){this.scroll&&this.scroll.refresh()},scrollTo:function(){this.scroll&&this.scroll.scrollTo.apply(this.scroll,arguments)},scrollToElement:function(){this.scroll&&this.scroll.scrollToElement.apply(this.scroll,arguments)},touchStart:function(t,e,s){1==(t=t||event).touches.length&&(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY,this.checked=e)},touchMove:function(t,e){t=t||event;var s=this.$refs.remove[this.checked].offsetWidth;if(1==t.touches.length)if(this.moveX=t.touches[0].clientX,this.moveY=t.touches[0].clientY,this.disX=this.startX-this.moveX,this.disY=this.startY-this.moveY,this.disX<0||0==this.disX)this.deleteSlider="transform:translateX(0px)";else if(this.disX>0){if("Y"==e["default-value"])return this.deleteSlider="transform:translateX(0px)",void Object(n.Toast)({message:"默认数据，无法删除",duration:1e3});this.disX>Math.abs(this.disY)&&Math.abs(this.disY)<60?(this.canMove=!0,this.deleteSlider="transform:translateX(-"+5*this.disX+"px)",5*this.disX>=s&&(this.deleteSlider="transform:translateX(-"+s+"px)")):this.canMove=!1}},touchEnd:function(t,e){if("Y"!=e["default-value"]){t=t||event;var s=this.$refs.remove[this.checked].offsetWidth;if(1==t.changedTouches.length){var i=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY;this.disX=this.startX-i,this.disY=this.startY-n,5*this.disX<s/2?this.deleteSlider="transform:translateX(0px)":this.canMove&&5*this.disX>s/2?this.deleteSlider="transform:translateX(-"+s+"px)":this.deleteSlider="transform:translateX(0px)"}}else this.deleteSlider="transform:translateX(0px)"},remove:function(t){this.$emit("remove",t)},clickItem:function(t){this.$emit("clickItem",t)}},watch:{list:function(){var t=this;this.deleteSlider="transform:translateX(0px)",setTimeout(function(){t.refresh()},this.refreshDelay)}}}},Z5lh:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"device-group-manage"},[s("Loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),t._v(" "),t.list.length>0?s("DeviceGroupList",{attrs:{list:t.list},on:{scroll:t.moveIng,scrollToEnd:t.scrollToEnd,remove:t.remove,clickItem:t.clickItem}}):t._e(),t._v(" "),s("bottom-operation",{attrs:{message:t.message},on:{click:t.addDeviceGroup}})],1)},staticRenderFns:[]}},rUpo:function(t,e,s){var i=s("VU/8")(s("DcsX"),s("Z5lh"),function(t){s("0xsV")},"data-v-c993c9e0",null);t.exports=i.exports},tvsf:function(t,e){},vz2D:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"device-group-list"},[s("div",{ref:"scroll_wrapper",staticClass:"scroll"},[s("div",{staticClass:"content"},t._l(t.list,function(e,i){return s("div",{key:i,staticClass:"slider cf",style:t.checked==i?t.deleteSlider:""},[s("div",{staticClass:"infor",on:{click:function(s){t.clickItem(e)},touchstart:function(s){t.touchStart(s,i,e)},touchmove:function(s){t.touchMove(s,e)},touchend:function(s){t.touchEnd(s,e)}}},[s("div",{staticClass:"infor_center"},[s("h5",[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"center_item font-color"},[s("span",[t._v("设备数:")]),t._v(" \n                            "),s("span",[t._v("总共(\n                                "),s("span",{domProps:{innerHTML:t._s(e.nums?e.nums:"0")}}),t._v(" )")]),t._v("  \n                            "),s("span",[t._v("在线(\n                                "),s("span",{domProps:{innerHTML:t._s(e.onlines?e.onlines:"0")}}),t._v(" )")]),t._v(" "),s("span",[t._v("离线(\n                                "),s("span",{domProps:{innerHTML:t._s(e.offlines?e.offlines:"0")}},[t._v(" ")]),t._v(" )\n                            ")])]),t._v(" "),s("div",{staticClass:"center_item"},[s("span",[t._v("添加时间:")]),t._v(" "),s("span",[t._v(t._s(e["create-time"]))])]),t._v(" "),s("div",{staticClass:"center_item"},[s("span",[t._v("模板名称:")]),t._v(" "),s("span",[t._v(t._s(e["template-name"]))])])]),t._v(" "),t._m(0,!0)]),t._v(" "),s("div",{ref:"remove",refInFor:!0,staticClass:"remove",on:{click:function(s){t.remove(e)}}},[t._v("\n                    删除\n                ")])])}))])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"infor_right"},[e("div",[e("i",{staticClass:"iF"},[this._v("")])])])}]}}});