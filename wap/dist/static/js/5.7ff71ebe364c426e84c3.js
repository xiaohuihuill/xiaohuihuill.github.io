webpackJsonp([5],{"/KUA":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("GQaK");t.default={props:{list:""},data:function(){return{startX:0,startY:0,disX:0,disY:0,deleteSlider:"",canMove:!0,checked:0}},created:function(){var e=this;this.$nextTick(function(){e.scroll=new s.a(e.$refs.wrapper,{})})},watch:{list:function(){this.deleteSlider="transform:translateX(0px)"}},methods:{touchStart:function(e,t){1==(e=e||event).touches.length&&(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY,this.checked=t)},touchMove:function(e){e=e||event;var t=this.$refs.remove[this.checked].offsetWidth;1==e.touches.length&&(this.moveX=e.touches[0].clientX,this.moveY=e.touches[0].clientY,this.disX=this.startX-this.moveX,this.disY=this.startY-this.moveY,this.disX<0||0==this.disX?this.deleteSlider="transform:translateX(0px)":this.disX>0&&(this.disX>Math.abs(this.disY)&&Math.abs(this.disY)<60?(this.canMove=!0,this.deleteSlider="transform:translateX(-"+5*this.disX+"px)",5*this.disX>=t&&(this.deleteSlider="transform:translateX(-"+t+"px)")):this.canMove=!1))},touchEnd:function(e){e=e||event;var t=this.$refs.remove[this.checked].offsetWidth;if(1==e.changedTouches.length){var i=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY;this.disX=this.startX-i,this.disY=this.startY-s,5*this.disX<t/2?this.deleteSlider="transform:translateX(0px)":this.canMove&&5*this.disX>t/2?this.deleteSlider="transform:translateX(-"+t+"px)":this.deleteSlider="transform:translateX(0px)"}},remove:function(e,t,i,s){this.deleteSlider="transform:translateX(0px)",this.$emit("remove",e,t,i,s)},clickItem:function(e){this.$emit("clickItem",e)}}}},"4rt2":function(e,t,i){var s=i("VU/8")(i("TKcW"),i("8qqm"),function(e){i("W/e6")},null,null);e.exports=s.exports},"5kMc":function(e,t){},"8qqm":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"select"},[i("div",{staticClass:"select_list cf"},e._l(e.list,function(t,s){return i("div",{key:s,staticClass:"select_item",class:s==e.checkedType?"active":"",on:{click:function(t){e.clickItem(s)}}},[e._v("\n            "+e._s(t.name)+"\n        ")])}))])},staticRenderFns:[]}},CpoG:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"wrapper",staticClass:"delete imglist_wrapper"},[i("div",{staticClass:"content"},e._l(e.list,function(t,s){return i("div",{key:s,staticClass:"slider cf",style:e.checked==s?e.deleteSlider:""},[i("div",{staticClass:"infor",on:{click:function(i){e.clickItem(t)},touchstart:function(t){e.touchStart(t,s)},touchmove:e.touchMove,touchend:e.touchEnd}},[i("div",{staticClass:"img_content"},[i("img",{attrs:{src:t.url}}),e._v(" "),i("mt-progress",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"item.open"}],attrs:{value:t.barwidth,"bar-height":5}})],1),e._v(" "),i("div",{staticClass:"text_content"},[i("span",[e._v("播放时长:")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.duration,expression:"item.duration"}],attrs:{type:"text",placeholder:"请输入播放时长"},domProps:{value:t.duration},on:{input:function(i){i.target.composing||e.$set(t,"duration",i.target.value)}}}),e._v(" "),i("span",[e._v("秒")])])]),e._v(" "),i("div",{ref:"remove",refInFor:!0,staticClass:"remove",on:{click:function(i){e.remove(t,t.fileId,s,t.id)}}},[e._v("\n                删除\n            ")])])}))])},staticRenderFns:[]}},Hlao:function(e,t,i){var s=i("VU/8")(i("QWrX"),i("WtgS"),function(e){i("VA+6")},null,null);e.exports=s.exports},QWrX:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__components_select_Select__=__webpack_require__("4rt2"),__WEBPACK_IMPORTED_MODULE_0__components_select_Select___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_select_Select__),__WEBPACK_IMPORTED_MODULE_1__components_select_SelectPick__=__webpack_require__("2/Wp"),__WEBPACK_IMPORTED_MODULE_1__components_select_SelectPick___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_select_SelectPick__),__WEBPACK_IMPORTED_MODULE_2__components_select_SelectContent__=__webpack_require__("Q/2R"),__WEBPACK_IMPORTED_MODULE_2__components_select_SelectContent___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_select_SelectContent__),__WEBPACK_IMPORTED_MODULE_3__components_advList_imgList__=__webpack_require__("f9q1"),__WEBPACK_IMPORTED_MODULE_3__components_advList_imgList___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__components_advList_imgList__),__WEBPACK_IMPORTED_MODULE_4__components_scroll_Scroll__=__webpack_require__("HrMK"),__WEBPACK_IMPORTED_MODULE_4__components_scroll_Scroll___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__components_scroll_Scroll__),__WEBPACK_IMPORTED_MODULE_5_mint_ui__=__webpack_require__("Au9i"),__WEBPACK_IMPORTED_MODULE_5_mint_ui___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_mint_ui__),__WEBPACK_IMPORTED_MODULE_6__common_mixin_js__=__webpack_require__("f744"),__WEBPACK_IMPORTED_MODULE_7_fs__=__webpack_require__("Ya8g"),__WEBPACK_IMPORTED_MODULE_7_fs___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_fs__),__WEBPACK_IMPORTED_MODULE_8__components_message_Message__=__webpack_require__("pZhx"),__WEBPACK_IMPORTED_MODULE_8__components_message_Message___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8__components_message_Message__),tip="无法确定需发布的设备";__webpack_exports__.default={mixins:[__WEBPACK_IMPORTED_MODULE_6__common_mixin_js__.b],components:{Select:__WEBPACK_IMPORTED_MODULE_0__components_select_Select___default.a,DatetimePicker:__WEBPACK_IMPORTED_MODULE_5_mint_ui__.DatetimePicker,SelectPick:__WEBPACK_IMPORTED_MODULE_1__components_select_SelectPick___default.a,ImgList:__WEBPACK_IMPORTED_MODULE_3__components_advList_imgList___default.a,Scroll:__WEBPACK_IMPORTED_MODULE_4__components_scroll_Scroll___default.a,SelectContent:__WEBPACK_IMPORTED_MODULE_2__components_select_SelectContent___default.a,Infor:__WEBPACK_IMPORTED_MODULE_8__components_message_Message___default.a},data:function(){return{planInfor:[{flex:1,values:[],className:"slot1",textAlign:"center",defaultIndex:0}],groupInfor:[{flex:1,values:[],className:"slot1",textAlign:"center",defaultIndex:0}],slotInfor:[{flex:1,values:[],className:"slot1",textAlign:"center",defaultIndex:0}],pickList:[],pickChecked:"",pickShow:!1,pickType:"",pls:"选择一个设备组",val:"",advName:"未命名",selectList:[{name:"七天"},{name:"一个月"},{name:"三个月"},{name:"六个月"},{name:"其他时间"}],selectType:"4",checkedSlotType:"",initTime:"",startTime:"",endTime:"",slotType:[{name:"普通广告"}],showPlan:!1,showGroup:!1,planName:"",groupName:"",slotName:"",deviceName:"",planInt:"请选择推广计划",groupInt:"请选择设备组",slotInt:"请选择广告位",checkedGroup:"",checkedDevice:"",checkedPlan:"",checkedSlot:"",deviceId:"",plupload:"",upIdArr:[],upInfor:[],payloadInfor:[],inforIndex:-1,uploadType:1,scroll:"",slotShowTime:"15",textSlotVal:"",refreshScroll:[1,2],slotId:"",isGroup:1,isText:!1,tip:tip,contentId:"",valueKey:"lable"}},created:function created(){var _this=this;this.getPlanInfor(),this.getGroupInfor(),this.initTime=new Date,this.deviceName=this.$route.query.name?this.$route.query.name:tip,this.slotId=this.$route.query.num,this.slotId?this.$esellApi.send("/api/ad/show.shtml",{id:this.slotId}).then(function(res){_this.advName=res.payload.name,_this.startTime=res.payload["start-time"],_this.endTime=res.payload["end-time"],_this.contentId=res.payload["material-id"],_this.checkedSlotType=res.payload.type-1,_this.checkedPlan=res.payload["campaign-id"];for(var i=0;i<_this.planInfor[0].values.length;i++)if(_this.planInfor[0].values[i].value==_this.checkedPlan){_this.planName=_this.planInfor[0].values[i].label;break}if(res.payload["ad-groups"].length>0?(_this.isGroup=1,_this.checkedGroup=res.payload["ad-groups"][0]["group-id"],_this.getSlotInfor({"group-id":_this.checkedGroup}),_this.groupName=_this.$route.query.name,_this.checkedSlot=res.payload["ad-groups"][0]["slot-id"],_this.slotName=res.payload["ad-groups"][0]["slot-name"]):res.payload["ad-devices"].length>0&&(_this.isGroup=2,_this.deviceId=res.payload["ad-devices"][0]["device-id"],_this.getSlotInfor({"device-id":_this.deviceId}),_this.groupName=_this.$route.query.name,_this.checkedSlot=res.payload["ad-devices"][0]["slot-id"],_this.slotName=res.payload["ad-devices"][0]["slot-name"],_this.checkedDevice=res.payload["ad-devices"][0]["device-id"],_this.$esellApi.send("/api/slot/options.shtml",{"device-id":res.payload["ad-devices"][0]["device-id"]}).then(function(e){_this.slotInfor[0].values=e.payload;for(var t=0;t<_this.slotInfor[0].values.length;t++)if(_this.slotInfor[0].values[t].value==_this.checkedDevice){_this.slotName=_this.slotInfor[0].values[t].name;break}}).catch(function(e){})),"CONTENT"==res.payload["material-type"])_this.uploadType=2,_this.textSlotVal=eval("("+res.payload["material-content"]+")").content,_this.isText=!0,_this.slotShowTime=res.payload.duration;else{_this.isText=!1;var inforObj={barwidth:100};inforObj.duration=res.payload.duration,inforObj.id=res.payload["material-id"],inforObj["material-library"]=!1,inforObj.name=res.payload.name,inforObj.open=!1,inforObj.status=!0,inforObj.type=res.payload["material-type"],inforObj.url=res.payload["cover-url-m"],_this.upInfor.push(inforObj)}}).catch(function(e){}):this.$router.push({name:"advertising"})},methods:{save:function(){var e=this,t=/^[0-9]+$/;if(!this.checkedPlan)return this.content="请选择推广计划",void(this.showPopup=!this.showPopup);if(this.advName.trim().length<1)return this.content="广告名称不能为空",void(this.showPopup=!this.showPopup);if(1==this.isGroup){if(!this.checkedGroup)return this.content="请选择设备组",void(this.showPopup=!this.showPopup)}else if(!this.checkedDevice)return this.content="请选择设备",void(this.showPopup=!this.showPopup);if(!this.checkedSlot||!this.slotName)return this.content="请选择广告位",void(this.showPopup=!this.showPopup);var i="",s="",a="",o="",n="";if(1==this.uploadType){if(this.upInfor.length<1)return this.content="请上传素材",void(this.showPopup=!this.showPopup);for(var l=0;l<this.upInfor.length;l++)if(!t.test(this.upInfor[l].duration))return this.content="第"+(l+1)+"个素材时长不为正整数",void(this.showPopup=!this.showPopup);i=this.upInfor[0].id,s=this.upInfor[0].duration}else if(2==this.uploadType){if(this.textSlotVal.trim().length<1)return this.content="文字内容不能为空",void(this.showPopup=!this.showPopup);if(!t.test(this.slotShowTime))return this.content="第1个素材时长不为正整数",void(this.showPopup=!this.showPopup);i="0",s=this.slotShowTime,a="CONTENT",n=this.textSlotVal,o={content:""+this.textSlotVal,bg_color:"#999",font_color:"#333",font_size:30,font_norma:"1"}}var r=[{}],c=[{}];1==this.isGroup?("ad-groups",c=[{"group-id":this.checkedGroup,"slot-id":this.checkedSlot}]):("ad-devices",r=[{"device-id":this.checkedDevice,"slot-id":this.checkedSlot}]),this.$esellApi.send("/api/ad/update.shtml",{id:this.slotId,type:this.checkedSlotType+1,"campaign-id":this.checkedPlan,"start-time":this.startTime,"end-time":this.endTime,duration:s,name:this.advName,"ad-groups":c,"ad-devices":r,"material-id":i,"material-type":a,"material-content":o,"material-name":n}).then(function(t){e.$router.push({name:"audit"})}).catch(function(t){e.content=t.message,e.showPopup=!e.showPopup})},setStartTime:function(e){this.startTime=this.dataType(e)},setEndTime:function(e){this.endTime=this.dataType(e)},cancle:function(){this.pickShow=!1},setGroup:function(e){this.pickShow=!1,1==this.pickType?(this.planName=e[0].label,this.checkedPlan=e[0].value):2==this.pickType?(this.groupName=e[0].label,this.checkedGroup=e[0].value,this.getSlotInfor({"group-id":e[0].value})):3==this.pickType&&(this.slotName=e[0].name,this.checkedSlot=e[0].value)},checkPlan:function(){this.pickShow=!0,this.pickType=1,this.pickChecked=this.planName,this.pickList=this.planInfor,this.valueKey="label"},clearPlan:function(){this.planName="",this.checkedPlan="",this.pickShow=!1},checkGroup:function(){this.pickShow=!0,this.pickType=2,this.pickChecked=this.groupName,this.pickList=this.groupInfor,this.valueKey="label"},clearGroup:function(){this.groupName="",this.checkedGroup="",this.slotName="",this.checkedSlot="",this.pickShow=!1},checkSlot:function(){this.pickShow=!0,this.pickType=3,this.pickChecked=this.slotName,this.pickList=this.slotInfor,this.valueKey="name"},clearSlot:function(){this.slotName="",this.checkedSlot="",this.pickShow=!1},clickItem:function(e){this.selectType=e,this.startTime=this.dataType(new Date),0==e?this.endTime=this.getSevenDay():1==e?this.endTime=this.getNextMonth(this.dataType(new Date),1):2==e?this.endTime=this.getNextMonth(this.dataType(new Date),3):3==e?this.endTime=this.getNextMonth(this.dataType(new Date),6):4==e&&(this.endTime=this.startTime)},checkStartTime:function(){this.$refs.startTimeEle.open()},checkEndTime:function(){this.$refs.endTimeEle.open()},changeSlotType:function(e){this.checkedSlotType=e},dataType:function(e){var t=e.getFullYear(),i=e.getMonth()+1;i=i<10?"0"+i:i;var s=e.getDate();s=s<10?"0"+s:s;var a=e.getHours();a=a<10?"0"+a:a;var o=e.getMinutes();o=o<10?"0"+o:o;var n=e.getSeconds();return t+"-"+i+"-"+s+" "+a+":"+o+":"+(n=n<10?"0"+n:n)},getNextMonth:function(e,t){var i=e.split("-"),s=i[0],a=i[1],o=i[2],n=new Date(s,a,0);n=n.getDate();var l=s,r=parseInt(a)+t;r>12&&(l=parseInt(l)+1,r-=12);var c=o,d=new Date(l,r,0);return c>(d=d.getDate())&&(c=d),r<10&&(r="0"+r),l+"-"+r+"-"+c},getSevenDay:function(){var e=(new Date).getTime();return e=new Date(e+6048e5),e=this.dataType(e)},getFileName:function(e){return e.replace(/\.(jpg|jpeg|png|bmp|mp4|avi|flv|wma|wmv|JPG)$/,"")},removeImg:function(e,t,i,s){var a,o=this,n=this;this.plupload.files;e["material-library"]?this.upInfor.find(function(e,t){e.id==s&&o.upInfor.splice(t,1)}):$.each(this.plupload.files,function(s,o){if(o){if(o.id==t){if(a=s,!n.upInfor.length==n.payloadInfor.length)for(var l=0;l<n.upInfor.length;l++)for(var r in n.payloadInfor)n.payloadInfor[n.upInfor[l].fileId]||delete n.payloadInfor[n.upInfor[l].fileId];if(!e.status)return n.plupload.removeFile(n.plupload.files[a]),n.upInfor.splice(i,1),void n.payloadInfor.splice(a,1);n.upInfor.splice(i,1)}n.inforIndex=-1}})},addText:function(){this.uploadType=2},addUpload:function(){this.uploadType=1,this.$refs.upWrapper.click()},getPlanInfor:function(){var e=this;this.$esellApi.send("/api/campaign/options.shtml",{}).then(function(t){e.planInfor[0].values=t.payload}).catch(function(e){})},getGroupInfor:function(){var e=this;this.$esellApi.send("/api/group/options.shtml",{}).then(function(t){e.groupInfor[0].values=t.payload}).catch(function(e){})},getSlotInfor:function(e){var t=this;this.$esellApi.send("/api/slot/options.shtml",e).then(function(e){e.payload?(t.slotInfor[0].values=e.payload,t.slotName=e.payload[0].name,t.checkedSlot=e.payload[0].value):t.slotInfor[0].values=[{value:"-1",label:"暂无数据",name:"无广告位"}]}).catch(function(e){})}},watch:{},filters:{}}},TKcW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={components:{},props:{list:"",selectType:""},data:function(){return{checkedType:"0"}},methods:{clickItem:function(e){this.checkedType=e,this.$emit("clickItem",e)}},watch:{selectType:function(){this.checkedType=this.selectType}},created:function(){this.checkedType=this.selectType}}},"VA+6":function(e,t){},"W/e6":function(e,t){},WtgS:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"addAdv",staticClass:"addAdv"},[i("Scroll",{attrs:{data:e.refreshScroll}},[i("div",{staticClass:"addAdv_content"},[i("div",{staticClass:"title"},[i("span",[e._v("设置广告信息")])]),e._v(" "),i("div",{staticClass:"addAdv_wrapper"},[i("div",{staticClass:"item"},[i("div",{staticClass:"item_left"},[i("span",[e._v("*")]),e._v(" 推广计划")]),e._v(" "),i("div",{staticClass:"item_right plan_name"},[i("SelectContent",{attrs:{value:e.planName,placeholder:e.planInt},on:{showItem:e.checkPlan,clearItem:e.clearPlan}})],1)]),e._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item_left"},[i("span",[e._v("*")]),e._v(" 广告名称")]),e._v(" "),i("div",{staticClass:"item_right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.advName,expression:"advName"}],attrs:{type:"text"},domProps:{value:e.advName},on:{input:function(t){t.target.composing||(e.advName=t.target.value)}}})])]),e._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item_left"},[i("span",[e._v("*")]),e._v(" 投放时间")]),e._v(" "),i("div",{staticClass:"item_right"},[i("Select",{attrs:{list:e.selectList,selectType:e.selectType},on:{clickItem:e.clickItem}})],1)]),e._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item_left pl24"},[e._v("\r\n                        开始时间\r\n                    ")]),e._v(" "),i("div",{staticClass:"item_right"},[4==e.selectType?i("div",{on:{click:e.checkStartTime}},[e._v("\r\n                            "+e._s(e.startTime)+"\r\n                        ")]):i("div",{staticClass:"time"},[e._v("\r\n                            "+e._s(e.startTime)+"\r\n                        ")])])]),e._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item_left pl24"},[e._v("\r\n                        结束时间\r\n                    ")]),e._v(" "),i("div",{staticClass:"item_right"},[4==e.selectType?i("div",{on:{click:e.checkEndTime}},[e._v("\r\n                            "+e._s(e.endTime)+"\r\n                        ")]):i("div",{staticClass:"time"},[e._v("\r\n                            "+e._s(e.endTime)+"\r\n                        ")])])]),e._v(" "),i("div",{staticClass:"item no_border"},[i("div",{staticClass:"item_left"},[i("span",[e._v("*")]),e._v(" 广告类型")]),e._v(" "),i("div",{staticClass:"item_right"},[i("Select",{attrs:{list:e.slotType,selectType:e.checkedSlotType},on:{clickItem:e.changeSlotType}})],1)])]),e._v(" "),i("div",{staticClass:"title"},[i("span",[e._v("选择投放广告位")])]),e._v(" "),i("div",{staticClass:"addAdv_wrapper"},[i("div",{staticClass:"item no_border"},[i("div",{staticClass:"item_left adv_position"},[i("span",[e._v("*")]),e._v(" 广告位置\r\n                    ")]),e._v(" "),1==e.isGroup?i("div",{staticClass:"item_right"},[i("div",{staticClass:"item_gtoup"},[i("SelectContent",{attrs:{value:e.groupName,placeholder:e.groupInt},on:{showItem:e.checkGroup,clearItem:e.clearGroup}})],1),e._v(" "),i("div",{staticClass:"item_slot"},[e.groupName?i("SelectContent",{attrs:{value:e.slotName,placeholder:e.slotInt},on:{showItem:e.checkSlot,clearItem:e.clearSlot}}):i("div",{staticClass:"deffault"},[e._v("\r\n                                未选设备组，无法选择广告位\r\n                            ")])],1)]):i("div",{staticClass:"item_right"},[i("div",{staticClass:"item_gtoup"},[e._v("\r\n                           "+e._s(e.deviceName)+"\r\n                        ")]),e._v(" "),i("div",{staticClass:"item_slot"},[e.deviceName!=e.tip&&2==e.isGroup?i("SelectContent",{attrs:{value:e.slotName,placeholder:e.slotInt},on:{showItem:e.checkSlot,clearItem:e.clearSlot}}):i("div",{staticClass:"deffault"},[e._v("\r\n                                未选择设备，无法选择广告位\r\n                            ")])],1)])])]),e._v(" "),i("div",{staticClass:"title"},[i("span",[e._v("上传素材")])]),e._v(" "),i("div",{staticClass:"addAdv_wrapper upload_wrapper"},[i("div",{staticClass:"item no_border"},[i("div",{staticClass:"item_left"},[i("span",[e._v("*")]),e._v(" 广告素材\r\n                    ")]),e._v(" "),i("div",{staticClass:"item_right"},[i("div",{staticClass:"upload_box"},[i("div",{staticClass:"upload_img",on:{click:e.addUpload}},[i("i",{staticClass:"iF"},[e._v("")]),i("p",[e._v("上传素材")])]),e._v(" "),i("button",{ref:"upWrapper",attrs:{id:"upload"}}),e._v(" "),i("div",{staticClass:"upload_text",class:2==e.uploadType?"advtive_text":"",on:{click:e.addText}},[i("i",{staticClass:"iF"},[e._v("")]),e._v(" "),i("p",[e._v("上传文字")])])])])]),e._v(" "),i("div",{staticClass:"slot_box"},[e.upInfor.length>0?i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.uploadType,expression:"uploadType==1"}],staticClass:"img_lissst"},[i("ImgList",{attrs:{list:e.upInfor},on:{remove:e.removeImg,clickItem:e.clickItem}})],1):i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.uploadType,expression:"uploadType==1"}],staticClass:"initText"},[e._v("\r\n                        您暂未上传素材\r\n                    ")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.uploadType,expression:"uploadType==2"}],staticClass:"item no_border "},[i("div",{staticClass:"item_left"},[i("span",[e._v("*")]),e._v(" 文字内容\r\n                        ")]),e._v(" "),i("div",{staticClass:"item_right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.textSlotVal,expression:"textSlotVal"}],attrs:{type:"text",placeholder:"请输入文字内容"},domProps:{value:e.textSlotVal},on:{input:function(t){t.target.composing||(e.textSlotVal=t.target.value)}}})])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.uploadType,expression:"uploadType==2"}],staticClass:"item no_border "},[i("div",{staticClass:"item_left"},[i("span",[e._v("*")]),e._v(" 播放时长\r\n                        ")]),e._v(" "),i("div",{staticClass:"item_right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.slotShowTime,expression:"slotShowTime"}],attrs:{type:"text",placeholder:"请输入播放时长"},domProps:{value:e.slotShowTime},on:{input:function(t){t.target.composing||(e.slotShowTime=t.target.value)}}}),e._v(" 秒\r\n                        ")])])])])])]),e._v(" "),i("div",{staticClass:"saveAdv_wrapper"},[i("div",{staticClass:"save_adv",on:{click:e.save}},[e._v("\r\n            发布\r\n        ")])]),e._v(" "),i("mt-datetime-picker",{ref:"startTimeEle",attrs:{type:"datetime",startDate:e.initTime},on:{confirm:e.setStartTime}}),e._v(" "),i("mt-datetime-picker",{ref:"endTimeEle",attrs:{type:"datetime",startDate:e.initTime},on:{confirm:e.setEndTime}}),e._v(" "),i("SelectPick",{attrs:{valueKey:e.valueKey,checked:e.pickChecked,list:e.pickList,isShow:e.pickShow},on:{confirm:e.setGroup,cancle:e.cancle}}),e._v(" "),i("Infor",{attrs:{position:e.position,duration:e.duration,type:e.type,content:e.content,modal:e.modal,showPopup:e.showPopup}})],1)},staticRenderFns:[]}},f744:function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return a});var s={created:function(){this.startTime=this.dataType(new Date),this.getSevenDay(),0==this.selectType?this.endTime=this.getSevenDay():1==this.selectType?this.endTime=this.getNextMonth(this.dataType(new Date),1):2==this.selectType?this.endTime=this.getNextMonth(this.dataType(new Date),3):1==this.selectType&&(this.endTime=this.getNextMonth(this.dataType(new Date),6)),this.$nextTick(function(){var e=this;e.plupload=new plupload.Uploader({browse_button:"upload",multi_selection:!0,runtimes:"html5,flash,html4",flash_swf_url:"https://cdn.bootcss.com/plupload/2.3.6/Moxie.swf",url:"http://oss.aliyuncs.com",filters:{max_file_size:"1gb",prevent_duplicates:!1},init:{FilesAdded:function(t,i){if(e.refreshScroll.reverse(),e.upInfor.length+i.length>5)t.files.splice(e.upInfor.length);else{for(var s=0;s<i.length;s++){if(i[s].type.indexOf("video/")<0&&i[s].type.indexOf("image/")<0)return e.content="只支持上传图片或视频",void(e.showPopup=!e.showPopup);!i[s].type.indexOf("video/")<0?e.multi="VDO":!i[s].type.indexOf("image/")<0&&(e.multi="IMG")}var a=[];e.upIdArr=[],i.map(function(e,t){var i={};i.name=e.name,a.push(i)});for(var o=0;o<i.length;o++){var n={};n.fileId=i[o].id,n.open=!0,n.barwidth=0,n.status=!1,n["material-library"]=!1,e.upIdArr.push(i[o].id),e.upInfor.push(n)}e.$esellApi.send("/media/callback/batch/add.shtml",a).then(function(t){if("OK"==t.message){for(var i=0;i<t.payload.length;i++)e.payloadInfor[e.upIdArr[i]]=t.payload[i];e.plupload.start()}}).catch(function(e){})}},UploadProgress:function(t,i){if(e.inforIndex<0)for(var s=0;s<e.upInfor.length;s++)e.upInfor[s].fileId==i.id&&(e.inforIndex=s);e.upInfor[e.inforIndex].barwidth=i.percent},BeforeUpload:function(t,i){e.plupload.setOption({url:e.payloadInfor[i.id].host,multipart_params:{key:""+e.payloadInfor[i.id].key,policy:e.payloadInfor[i.id].policy,OSSAccessKeyId:e.payloadInfor[i.id]["access-id"],success_action_status:"200",callback:e.payloadInfor[i.id].callback,signature:e.payloadInfor[i.id].sign}})},FileUploaded:function(t,i,s){var a=e.upInfor[e.inforIndex];if("200"==s.status){s=JSON.parse(s.response);a.open=!1,a.duration=s.payload.duration,a.url=s.payload.coverUrl,a.id=s.payload.id,a.name=e.getFileName(e.payloadInfor[i.id].name),a.status=!0,i.type.indexOf("video")>=0?(s.payload.coverUrl?a["cover-url"]=s.payload.coverUrl:a["cover-url"]="http://file1.yixinfa.cn/dev/180313/fdfa2242540744efa64aed672e838765.jpg",a.type="2"):a.type="1"}e.inforIndex=-1,e.upInfor.splice(e.upInfor.length)}},Error:function(t,i){-600==i.code?e.message("error","选择的文件太大"):-601==i.code?e.message("error","文件类型不符合要求"):-602==i.code?e.message("error","不允许有重复文件"):e.message("error","服务器错误，请刷新页面")}}),e.plupload.init()})}},a={data:function(){return{position:"top",content:"",showPopup:!1,modal:!0,duration:"3000",type:"error"}},created:function(){this.startTime=this.dataType(new Date),this.getSevenDay(),0==this.selectType?this.endTime=this.getSevenDay():1==this.selectType?this.endTime=this.getNextMonth(this.dataType(new Date),1):2==this.selectType?this.endTime=this.getNextMonth(this.dataType(new Date),3):1==this.selectType&&(this.endTime=this.getNextMonth(this.dataType(new Date),6)),this.$nextTick(function(){var e=this;e.plupload=new plupload.Uploader({browse_button:"upload",multi_selection:!1,runtimes:"html5,flash,html4",flash_swf_url:"https://cdn.bootcss.com/plupload/2.3.6/Moxie.swf",url:"http://oss.aliyuncs.com",filters:{max_file_size:"1gb",prevent_duplicates:!1},init:{FilesAdded:function(t,i){for(var s=0;s<i.length;s++){if(i[s].type.indexOf("video/")<0&&i[s].type.indexOf("image/")<0)return e.content="只支持上传图片或视频",void(e.showPopup=!e.showPopup);!i[s].type.indexOf("video/")<0?e.multi="VDO":!i[s].type.indexOf("image/")<0&&(e.multi="IMG")}e.refreshScroll.reverse();var a=[];e.upIdArr=[],i.map(function(e,t){var i={};i.name=e.name,a.push(i)});for(var o=0;o<i.length;o++){var n={};n.fileId=i[o].id,n.open=!0,n.barwidth=0,n.status=!1,n["material-library"]=!1,e.upIdArr.push(i[o].id),e.upInfor.push(n)}e.$esellApi.send("/media/callback/batch/add.shtml",a).then(function(t){if("OK"==t.message){for(var i=0;i<t.payload.length;i++)e.payloadInfor[e.upIdArr[i]]=t.payload[i];e.plupload.start()}}).catch(function(e){})},UploadProgress:function(t,i){if(e.inforIndex<0)for(var s=0;s<e.upInfor.length;s++)e.upInfor[s].fileId==i.id&&(e.inforIndex=s);e.upInfor[e.inforIndex].barwidth=i.percent},BeforeUpload:function(t,i){e.plupload.setOption({url:e.payloadInfor[i.id].host,multipart_params:{key:""+e.payloadInfor[i.id].key,policy:e.payloadInfor[i.id].policy,OSSAccessKeyId:e.payloadInfor[i.id]["access-id"],success_action_status:"200",callback:e.payloadInfor[i.id].callback,signature:e.payloadInfor[i.id].sign}})},FileUploaded:function(t,i,s){var a=e.upInfor[e.inforIndex];if("200"==s.status){s=JSON.parse(s.response);a.open=!1,a.duration=s.payload.duration,a.url=s.payload.coverUrl,a.id=s.payload.id,a.name=e.getFileName(e.payloadInfor[i.id].name),a.status=!0,i.type.indexOf("video")>=0?(s.payload.coverUrl?a["cover-url"]=s.payload.coverUrl:a["cover-url"]="http://file1.yixinfa.cn/dev/180313/fdfa2242540744efa64aed672e838765.jpg",a.type="VDO"):a.type="IMG"}e.inforIndex=-1,e.isText?e.upInfor.splice(1,1):e.upInfor.splice(0,1)}},Error:function(t,i){-600==i.code?e.message("error","选择的文件太大"):-601==i.code?e.message("error","文件类型不符合要求"):-602==i.code?e.message("error","不允许有重复文件"):e.message("error","服务器错误，请刷新页面")}}),e.plupload.init()})}}},f9q1:function(e,t,i){var s=i("VU/8")(i("/KUA"),i("CpoG"),function(e){i("5kMc")},null,null);e.exports=s.exports}});