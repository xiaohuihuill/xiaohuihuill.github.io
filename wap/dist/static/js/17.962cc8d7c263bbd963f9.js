webpackJsonp([17],{"4fgk":function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"adv_plan_list"},[e("Scroll",{attrs:{listenScroll:!0,data:t.list,pullup:!0},on:{scroll:t.moveIng,scrollToEnd:t.scrollToEnd}},[e("div",{staticClass:"content"},t._l(t.list,function(s,i){return e("div",{key:i,staticClass:"slider cf",style:t.checked==i?t.deleteSlider:""},[e("div",{staticClass:"infor",on:{click:function(e){t.clickItem(s)},touchstart:function(e){t.touchStart(e,i,s)},touchmove:function(e){t.touchMove(e,s)},touchend:function(e){t.touchEnd(e,s)}}},[e("div",{staticClass:"infor_center"},[e("h5",[t._v(t._s(s.name))]),t._v(" "),e("div",{staticClass:"center_item adv_num"},[e("span",[t._v("广告数:")]),t._v(" "),e("span",[t._v("总数")]),t._v(" "),e("span",[t._v("("+t._s(s["ad-count"])+")")])]),t._v(" "),e("div",{staticClass:"center_item"},[e("span",[t._v("状态:")]),t._v(" "),"Y"==s.status?e("span",{staticClass:"green"},[t._v(t._s(t.status[s.status]))]):e("span",{staticClass:"red"},[t._v(t._s(t.status[s.status]))])])]),t._v(" "),e("div",{staticClass:"infor_right"},[e("div",[e("i",{staticClass:"iF"},[t._v("")])])])]),t._v(" "),e("div",{ref:"remove",refInFor:!0,staticClass:"remove",on:{click:function(e){t.remove(s)}}},[t._v("\n                    删除\n                ")])])}))])],1)},staticRenderFns:[]}},II9m:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"advPlan"},[e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),t._v(" "),t.list.length>0?e("AdvPlanList",{attrs:{status:t.status,list:t.list},on:{remove:t.remove,clickItem:t.clickItem,loadMore:t.loadMore,refresh:t.refresh}}):e("div",[t._v("空数据")]),t._v(" "),e("div",{staticClass:"advPlanFooter"},[e("div",{staticClass:"add_btn",on:{click:t.addPlan}},[t._v("\n            新增推广计划\n        ")])])],1)},staticRenderFns:[]}},JjlS:function(t,s,e){var i=e("VU/8")(e("pb67"),e("4fgk"),function(t){e("ZesI")},null,null);t.exports=i.exports},ZesI:function(t,s){},hbOu:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("JjlS"),a=e.n(i),n=e("HrMK"),o=e.n(n),c=e("qqiS"),r=e.n(c),l=e("Au9i");e.n(l);s.default={components:{AdvPlanList:a.a,Scroll:o.a,MessageBox:l.MessageBox,Loading:r.a,Toast:l.Toast},data:function(){return{list:[],page:1,size:10,total:9,status:{Y:"启用",N:"暂停"},isLoading:!0}},methods:{remove:function(t){var s=this;"Y"!=t["default-value"]?l.MessageBox.confirm("您确定要将此推广计划删除？").then(function(e){s.$esellApi.send("/api/campaign/delete.shtml",{id:t.id}).then(function(t){s.getAdvInfor(!0)}).catch(function(t){})}).catch(function(t){}):Object(l.Toast)({message:"默认数据，无法删除",duration:1e3})},clickItem:function(t){this.$router.push({name:"AdvListItem",query:{num:t.id,name:t.name,default:t["default-value"]}})},loadMore:function(){Math.ceil(this.total/this.size)>=this.page?(this.page+=1,this.isLoading=!0,this.getAdvInfor()):Object(l.Toast)({message:"已经是最后一页的数据了",duration:1e3})},refresh:function(){this.page=1,this.isLoading=!0,this.getAdvInfor(!0)},addPlan:function(){this.$router.push({name:"AddAdvPlan",query:{num:-1}})},getAdvInfor:function(t){var s=this;this.$esellApi.send("/api/campaign/list.shtml",{page:this.page,size:this.size}).then(function(e){s.isLoading=!1,s.total=e.payload.total,s.list=t?e.payload.data:s.list.concat(e.payload.data)}).catch(function(t){s.isLoading=!1})}},watch:{},created:function(){this.getAdvInfor()}}},lqjc:function(t,s){},pb67:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("HrMK"),a=e.n(i),n=e("Au9i");e.n(n);s.default={components:{Scroll:a.a,Toast:n.Toast},props:{list:"",status:""},data:function(){return{startX:0,startY:0,disX:0,disY:0,deleteSlider:"",canMove:!0,checked:0,canAjax:!0}},watch:{list:function(){this.deleteSlider="transform:translateX(0px)"}},methods:{touchStart:function(t,s,e){"Y"!=e["default-value"]&&1==(t=t||event).touches.length&&(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY,this.checked=s)},touchMove:function(t,s){t=t||event;var e=this.$refs.remove[this.checked].offsetWidth;if(1==t.touches.length)if(this.moveX=t.touches[0].clientX,this.moveY=t.touches[0].clientY,this.disX=this.startX-this.moveX,this.disY=this.startY-this.moveY,this.disX<0||0==this.disX)this.deleteSlider="transform:translateX(0px)";else if(this.disX>0){if("Y"==s["default-value"])return this.deleteSlider="transform:translateX(0px)",void Object(n.Toast)({message:"默认数据，无法删除",duration:1e3});this.disX>Math.abs(this.disY)&&Math.abs(this.disY)<60?(this.canMove=!0,this.deleteSlider="transform:translateX(-"+5*this.disX+"px)",5*this.disX>=e&&(this.deleteSlider="transform:translateX(-"+e+"px)")):this.canMove=!1}},touchEnd:function(t,s){t=t||event;var e=this.$refs.remove[this.checked].offsetWidth;if(1==t.changedTouches.length){var i=t.changedTouches[0].clientX,a=t.changedTouches[0].clientY;this.disX=this.startX-i,this.disY=this.startY-a,5*this.disX<e/2?this.deleteSlider="transform:translateX(0px)":this.canMove&&5*this.disX>e/2?this.deleteSlider="transform:translateX(-"+e+"px)":this.deleteSlider="transform:translateX(0px)"}},remove:function(t){this.$emit("remove",t)},clickItem:function(t){this.$emit("clickItem",t)},moveIng:function(t,s,e){Math.abs(s)-Math.abs(e)>20?this.canAjax&&(this.canAjax=!1,this.$emit("loadMore")):s>50&&this.canAjax&&(this.canAjax=!1,this.$emit("refresh"))},scrollToEnd:function(t,s){this.canAjax=!0}}}},xKlF:function(t,s,e){var i=e("VU/8")(e("hbOu"),e("II9m"),function(t){e("lqjc")},null,null);t.exports=i.exports}});