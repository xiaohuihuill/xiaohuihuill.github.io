webpackJsonp([25],{Ur3Z:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("div",{staticClass:"adv"},[_("Loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),t._v(" "),_("Search",{attrs:{placeholder:t.placeholder,intVal:t.intSearchVal},on:{searchVal:t.searchVal,search:t.toSearch,cancle:t.cancle}}),t._v(" "),_("div",{staticClass:"adv_box"},[_("div",{staticClass:"adv_box_item",on:{click:t.addAdv}},[_("i",{staticClass:"iF"},[t._v("")]),t._v(" "),_("p",[t._v("发布广告")])]),t._v(" "),_("div",{staticClass:"adv_box_item",on:{click:t.advPlan}},[_("i",{staticClass:"iF"},[t._v("")]),t._v(" "),_("p",[t._v("推广计划管理")])])]),t._v(" "),_("div",{staticClass:"adv_navbar"},[_("mt-navbar",{model:{value:t.selectedAdv,callback:function(e){t.selectedAdv=e},expression:"selectedAdv"}},[_("mt-tab-item",{attrs:{id:"0"}},[t._v("全部广告")]),t._v(" "),_("mt-tab-item",{attrs:{id:"3-4"}},[t._v("投放中")]),t._v(" "),_("mt-tab-item",{attrs:{id:"5"}},[t._v("暂停中")])],1),t._v(" "),_("mt-tab-container",{model:{value:t.selectedAdv,callback:function(e){t.selectedAdv=e},expression:" selectedAdv"}},[_("mt-tab-container-item",{attrs:{id:"0"}},[t.listAll.length>0?_("AdvList",{attrs:{list:t.listAll},on:{remove:t.remove,clickItem:t.clickItem,loadMore:t.loadMore,refresh:t.refresh}}):_("div",{staticClass:"img_wrapper"},[_("ImgContent",{attrs:{emptyInfor:"暂无广告",addSomething:"发布广告"},on:{add:t.addAdv}})],1)],1),t._v(" "),_("mt-tab-container-item",{attrs:{id:"3-4"}},[t.listEnable.length>0?_("AdvList",{attrs:{list:t.listEnable},on:{remove:t.remove,clickItem:t.clickItem,refresh:t.refresh,loadMore:t.loadMore}}):_("div",{staticClass:"img_wrapper"},[_("ImgContent",{attrs:{emptyInfor:"暂无广告",addSomething:"发布广告"},on:{add:t.addAdv}})],1)],1),t._v(" "),_("mt-tab-container-item",{attrs:{id:"5"}},[t.listDisable.length>0?_("AdvList",{attrs:{list:t.listDisable},on:{remove:t.remove,clickItem:t.clickItem,loadMore:t.loadMore,refresh:t.refresh}}):_("div",{staticClass:"img_wrapper"},[_("ImgContent",{attrs:{emptyInfor:"暂无广告",addSomething:"发布广告"},on:{add:t.addAdv}})],1)],1)],1)],1)],1)},staticRenderFns:[]}},"kFM+":function(t,e){},xyVD:function(t,e,_){var a=_("VU/8")(_("y54B"),_("Ur3Z"),function(t){_("kFM+")},null,null);t.exports=a.exports},y54B:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__components_search_search__=__webpack_require__("YOyO"),__WEBPACK_IMPORTED_MODULE_0__components_search_search___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_search_search__),__WEBPACK_IMPORTED_MODULE_1__components_loading_loading__=__webpack_require__("qqiS"),__WEBPACK_IMPORTED_MODULE_1__components_loading_loading___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_loading_loading__),__WEBPACK_IMPORTED_MODULE_2__components_imgContent_imgContent__=__webpack_require__("K4iZ"),__WEBPACK_IMPORTED_MODULE_2__components_imgContent_imgContent___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_imgContent_imgContent__),__WEBPACK_IMPORTED_MODULE_3__components_advList_AdvList__=__webpack_require__("sP7u"),__WEBPACK_IMPORTED_MODULE_3__components_advList_AdvList___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__components_advList_AdvList__),__WEBPACK_IMPORTED_MODULE_4_mint_ui__=__webpack_require__("Au9i"),__WEBPACK_IMPORTED_MODULE_4_mint_ui___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_mint_ui__),__WEBPACK_IMPORTED_MODULE_5__components_search_search_vue__=__webpack_require__("YOyO"),__WEBPACK_IMPORTED_MODULE_5__components_search_search_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__components_search_search_vue__);__webpack_exports__.default={components:{Search:__WEBPACK_IMPORTED_MODULE_0__components_search_search___default.a,Loading:__WEBPACK_IMPORTED_MODULE_1__components_loading_loading___default.a,AdvList:__WEBPACK_IMPORTED_MODULE_3__components_advList_AdvList___default.a,Navbar:__WEBPACK_IMPORTED_MODULE_4_mint_ui__.Navbar,TabItem:__WEBPACK_IMPORTED_MODULE_4_mint_ui__.TabItem,MessageBox:__WEBPACK_IMPORTED_MODULE_4_mint_ui__.MessageBox,Toast:__WEBPACK_IMPORTED_MODULE_4_mint_ui__.Toast,ImgContent:__WEBPACK_IMPORTED_MODULE_2__components_imgContent_imgContent___default.a},data:function(){return{search:"",selectedAdv:"",active:"",listInfor:["soltId","name","creatTime","plan","status","url"],listAll:[],listEnable:[],listDisable:[],page:1,size:10,total:9,placeholder:"请输入搜索的广告名称",searchValue:"",intSearchVal:"",isPull:!1,isLoading:!0}},methods:{toSearch:function(t){this.searchValue&&this.getAdvInfor()},searchVal:function(t){this.searchValue=t,this.intSearchVal=t},cancle:function(){this.searchValue="",this.intSearchVal="",this.isPull=!0,this.getAdvInfor()},remove:function(t){var e=this;__WEBPACK_IMPORTED_MODULE_4_mint_ui__.MessageBox.confirm("您确定要删除此广告?删除后不可恢复!","温馨提示").then(function(_){e.$esellApi.send("/api/ad/delete/batch.shtml",{ids:[t.id]}).then(function(t){e.getAdvInfor(!0),Object(__WEBPACK_IMPORTED_MODULE_4_mint_ui__.Toast)({message:"删除成功",position:"middel",duration:3e3})}).catch(function(t){e.content=t.message,e.showPopup=!e.showPopup})}).catch(function(t){})},addAdv:function(){this.$router.push({name:"AddAdv"})},advPlan:function(){this.$router.push({name:"AdvPlan"})},clickItem:function clickItem(data){var type="",textContent="",nameInfor="";data["group-names"]?data["group-names"].length>0&&(nameInfor=data["group-names"][0]):data["device-names"]&&data["device-names"].length>0&&(nameInfor=data["device-names"][0]),"CONTENT"==data["material-type"]?(type=2,textContent=eval("("+data["material-content"]+")").content,this.$router.push({name:"AdvDetails",query:{num:data.id,type:type,content:textContent,status:data.status,name:nameInfor}})):(type=1,this.$router.push({name:"AdvDetails",query:{num:data.id,src:data["cover-url-m"],type:type,status:data.status,name:nameInfor}}))},loadMore:function(){Math.ceil(this.total/this.size)>=this.page?(this.page+=1,this.isLoading=!0,this.getAdvInfor()):Object(__WEBPACK_IMPORTED_MODULE_4_mint_ui__.Toast)({message:"已经是最后一页的数据了",duration:1e3})},refresh:function(){this.page=1,this.isLoading=!0,this.getAdvInfor(!0)},getAdvInfor:function(t){var e=this;this.$esellApi.send("/api/ad/list/campaign.shtml",{page:this.page,size:this.size,"ad-status":this.selectedAdv,name:this.searchValue}).then(function(_){e.isLoading=!1,e.total=_.payload.total,"0"==e.selectedAdv?e.listAll=t?_.payload.data:e.listAll.concat(_.payload.data):"3-4"==e.selectedAdv?e.listEnable=t?_.payload.data:e.listEnable.concat(_.payload.data):"5"==e.selectedAdv&&(e.listDisable=t?_.payload.data:e.listDisable.concat(_.payload.data))}).catch(function(t){e.isLoading=!1,Object(__WEBPACK_IMPORTED_MODULE_4_mint_ui__.Toast)({message:t.message,duration:1e3})})}},watch:{selectedAdv:function(t,e){this.intSearchVal="",this.searchValue="","0"==this.selectedAdv&&0==this.listAll.length||this.isPull?(this.getAdvInfor(),this.isPull=!1):"3-4"==this.selectedAdv&&0==this.listEnable.length||this.isPull?(this.getAdvInfor(),this.isPull=!1):("5"==this.selectedAdv&&0==this.listDisable.length||this.isPull)&&(this.getAdvInfor(),this.isPull=!1)}},created:function(){this.$route.query.status?1==this.$route.query.status?this.selectedAdv="0":2==this.$route.query.status&&(this.selectedAdv="3-4"):this.selectedAdv="0"}}}});