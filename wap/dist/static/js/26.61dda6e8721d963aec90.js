webpackJsonp([26],{DO59:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__components_scroll_Scroll__=__webpack_require__("HrMK"),__WEBPACK_IMPORTED_MODULE_0__components_scroll_Scroll___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_scroll_Scroll__),__WEBPACK_IMPORTED_MODULE_1__components_loading_loading__=__webpack_require__("qqiS"),__WEBPACK_IMPORTED_MODULE_1__components_loading_loading___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_loading_loading__),__WEBPACK_IMPORTED_MODULE_2__components_advList_AdvList__=__webpack_require__("sP7u"),__WEBPACK_IMPORTED_MODULE_2__components_advList_AdvList___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_advList_AdvList__),__WEBPACK_IMPORTED_MODULE_3__components_footer_advListFooter__=__webpack_require__("A21p"),__WEBPACK_IMPORTED_MODULE_3__components_footer_advListFooter___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__components_footer_advListFooter__),__WEBPACK_IMPORTED_MODULE_4__components_message_Message__=__webpack_require__("pZhx"),__WEBPACK_IMPORTED_MODULE_4__components_message_Message___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__components_message_Message__),__WEBPACK_IMPORTED_MODULE_5_mint_ui__=__webpack_require__("Au9i"),__WEBPACK_IMPORTED_MODULE_5_mint_ui___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_mint_ui__);__webpack_exports__.default={components:{AdvList:__WEBPACK_IMPORTED_MODULE_2__components_advList_AdvList___default.a,Scroll:__WEBPACK_IMPORTED_MODULE_0__components_scroll_Scroll___default.a,Footer:__WEBPACK_IMPORTED_MODULE_3__components_footer_advListFooter___default.a,MessageBox:__WEBPACK_IMPORTED_MODULE_5_mint_ui__.MessageBox,Infor:__WEBPACK_IMPORTED_MODULE_4__components_message_Message___default.a,Loading:__WEBPACK_IMPORTED_MODULE_1__components_loading_loading___default.a,Toast:__WEBPACK_IMPORTED_MODULE_5_mint_ui__.Toast},data:function(){return{list:[],page:1,size:10,total:9,footerList:{type:{icon:"&#xe69f;",text:"发布广告",color:"#ff5663;"},left:"删除计划",right:"编辑计划"},planId:"",planName:"",position:"top",content:"",showPopup:!1,modal:!0,duration:"3000",type:"error",footerType:"1",isLoading:!0}},methods:{clickItem:function clickItem(data){var type="",textContent="",nameInfor="";data["group-names"]?data["group-names"].length>0&&(nameInfor=data["group-names"][0]):data["device-names"]&&data["device-names"].length>0&&(nameInfor=data["device-names"][0]),"CONTENT"==data["material-type"]?(type=2,textContent=eval("("+data["material-content"]+")").content,this.$router.push({name:"AdvDetails",query:{num:data.id,type:type,content:textContent,status:data.status,name:nameInfor}})):(type=1,this.$router.push({name:"AdvDetails",query:{num:data.id,src:data["cover-url-m"],type:type,status:data.status,name:nameInfor}}))},loadMore:function(){Math.ceil(this.total/this.size)>=this.page?Object(__WEBPACK_IMPORTED_MODULE_5_mint_ui__.Toast)({message:"已经是最后一页的数据了",duration:1e3}):(this.page+=1,this.isLoading=!0,this.getAdvInfor())},refresh:function(){this.page=1,this.isLoading=!0,this.getAdvInfor(!0)},remove:function(_){var e=this;__WEBPACK_IMPORTED_MODULE_5_mint_ui__.MessageBox.confirm("您确定要删除此广告?删除后不可恢复!","温馨提示").then(function(t){e.$esellApi.send("/api/ad/delete/batch.shtml",{ids:[_.id]}).then(function(_){e.$router.push({name:"AdvPlan"})}).catch(function(_){e.content=_.message,e.showPopup=!e.showPopup})}).catch(function(_){})},removePlan:function(){var _=this;"Y"!=this.$route.query.default?__WEBPACK_IMPORTED_MODULE_5_mint_ui__.MessageBox.confirm("您确定要将此推广计划删除？").then(function(e){_.$esellApi.send("/api/campaign/delete.shtml",{id:_.planId}).then(function(e){_.$router.push({name:"AdvPlan"})}).catch(function(e){_.content=e.message,_.showPopup=!_.showPopup})}).catch(function(_){}):Object(__WEBPACK_IMPORTED_MODULE_5_mint_ui__.Toast)({message:"系统默认的推广计划无法删除",position:"middel",duration:3e3})},addAdv:function(){this.$router.push({name:"AddAdv",query:{checkedPlan:this.planId,planName:this.planName}})},editPlan:function(){"Y"!=this.$route.query.default?this.$router.push({name:"AddAdvPlan",query:{num:this.planId,name:this.planName}}):Object(__WEBPACK_IMPORTED_MODULE_5_mint_ui__.Toast)({message:"系统默认的推广计划无法编辑",position:"middel",duration:3e3})},getAdvInfor:function(_){var e=this;this.$esellApi.send("/api/ad/list/campaign.shtml",{page:this.page,size:this.size,"campaign-id":this.planId}).then(function(t){e.isLoading=!1,e.total=t.payload.total,e.list=_?t.payload.data:e.list.concat(t.payload.data)}).catch(function(_){e.isLoading=!1})}},watch:{},created:function(){this.planId=this.$route.query.num,this.planName=this.$route.query.name,this.getAdvInfor()}}},VjUh:function(_,e){},bWbG:function(_,e){_.exports={render:function(){var _=this,e=_.$createElement,t=_._self._c||e;return t("div",{staticClass:"advListItem"},[t("Loading",{directives:[{name:"show",rawName:"v-show",value:_.isLoading,expression:"isLoading"}]}),_._v(" "),t("div",{staticClass:"adv_title"},[t("span",[_._v(_._s(_.planName))])]),_._v(" "),_.list.length>0?t("AdvList",{attrs:{list:_.list},on:{remove:_.remove,clickItem:_.clickItem,loadMore:_.loadMore,refresh:_.refresh}}):_._e(),_._v(" "),t("Footer",{attrs:{list:_.footerList,type:_.footerType},on:{remove:_.removePlan,add:_.addAdv,edit:_.editPlan}}),_._v(" "),t("Infor",{attrs:{position:_.position,duration:_.duration,type:_.type,content:_.content,modal:_.modal,showPopup:_.showPopup}})],1)},staticRenderFns:[]}},zYnb:function(_,e,t){var a=t("VU/8")(t("DO59"),t("bWbG"),function(_){t("VjUh")},null,null);_.exports=a.exports}});